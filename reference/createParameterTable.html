<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create parameter table data.frame using `NMreadExt()` and `NMreadParsText()` — createParameterTable • NMwork</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create parameter table data.frame using `NMreadExt()` and `NMreadParsText()` — createParameterTable"><meta name="description" content="Automated parameter table creation of Nonmem models. Currently,
requires a covariance step."><meta property="og:description" content="Automated parameter table creation of Nonmem models. Currently,
requires a covariance step."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NMwork</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.907</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ParameterTables.html">NMwork - Create Nonmem Parameter Tables</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nmautoverse/NMwork/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create parameter table data.frame using `NMreadExt()` and `NMreadParsText()`</h1>
      <small class="dont-index">Source: <a href="https://github.com/nmautoverse/NMwork/blob/main/R/createParameterTable.R" class="external-link"><code>R/createParameterTable.R</code></a></small>
      <div class="d-none name"><code>createParameterTable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Automated parameter table creation of Nonmem models. Currently,
requires a covariance step.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">createParameterTable</span><span class="op">(</span></span>
<span>  <span class="va">file.lst</span>,</span>
<span>  args.ParsText <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df.repair <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by.repair <span class="op">=</span> <span class="st">"symbol"</span>,</span>
<span>  <span class="va">df.labs</span>,</span>
<span>  <span class="va">drop.symbol</span>,</span>
<span>  <span class="va">file.ext</span>,</span>
<span>  <span class="va">df.panels</span>,</span>
<span>  script <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file-lst">file.lst<a class="anchor" aria-label="anchor" href="#arg-file-lst"></a></dt>
<dd><p>Control stream. If possible, it is recommended to
use output control stream. You can also use input control
stream.</p></dd>


<dt id="arg-args-parstext">args.ParsText<a class="anchor" aria-label="anchor" href="#arg-args-parstext"></a></dt>
<dd><p>List of arguments to be passes to
`NMreadParsText()`. This will only be used if `df.labs` is
omitted.</p></dd>


<dt id="arg-df-repair">df.repair<a class="anchor" aria-label="anchor" href="#arg-df-repair"></a></dt>
<dd><p>Optional table of labels to overwrite results
from `NMreadParsText()`. Useful to correct table issues
without rerunning the model. This is only relevant if df.labs
is omitted, and `NMreadParsText()` is run by
`createParameterTable()`. Notice, the `df.labs` argument
provides full flexibility to construct the labels before
running `createParameterTable()`, and `dt.labels` is only a
solution to a more specific case. `dt.labels` is likely to be
re-designed or even dropped in the future.</p></dd>


<dt id="arg-by-repair">by.repair<a class="anchor" aria-label="anchor" href="#arg-by-repair"></a></dt>
<dd><p>If `dt.labels` provided, names of columns to
merge by.</p></dd>


<dt id="arg-df-labs">df.labs<a class="anchor" aria-label="anchor" href="#arg-df-labs"></a></dt>
<dd><p>An optional data.frame with parameter labels. If
provided, this will be the only source of labels and other
columns like units, transformations, etc.</p></dd>


<dt id="arg-drop-symbol">drop.symbol<a class="anchor" aria-label="anchor" href="#arg-drop-symbol"></a></dt>
<dd><p>Symbol values to not include. To be specific,
rows with these values in the symbol column will be omitted in
the generated table.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following columns are attempted used and may be
    modified. It is important for the user to understand how these
    must be formatted.</p>
<p>In many cases, a combination of args.ParsText and
df.repair+by.repair is an easy way to have createParameterTable()
do all the work. This will use NMreadParsText() and mergeCoal() to
repair the table. If this is insufficient, the labels can be read
into a data.frame first and passed as <code>df.labs</code>. In that
case, other tools like NMrelate() can also be used.</p>
<p><code>createParameterTable</code> looks for and uses the following columns as available:</p><ul><li><p>symbol Typically, the variable name associated with the parameter. "CL".</p></li>
<li><p>label The parameter label. "Clearance".</p></li>
<li><p>trans Parameter transformation (character strings). See below for possible strings.</p></li>
<li><p>unit The parameter unit. "L/h".</p></li>
<li><p>panel Blocks of parameters types. See below for options.</p></li>
</ul><p>Adding rse, CI.l, CI.u, and corr</p>
<p>Descriptive columns generated by <code>createParameterTable</code>:</p><ul><li><p>tab.est The value column to be shown in parameter
tables. The format depends on the parameter type and the
transformation.</p></li>
<li><p>tab.est.ltx A latex version of tab.est</p></li>
<li><p>parameter.ltx. A latex version of the
parameter name (like theta(1)). In case a THETA is log tranformed, an asterisk
(*) is appended, for logit transformed THETAs, two asterisks (**)
are appended. This is for footnoteing that the parameter estimates
are shown on the physiologigical or natural scale.</p></li>
</ul><p>### Guideline for panel column:
   ## THETA: struct (default), cov (covariates), RV (residual variability parameters)
   ## OMEGA: IIV/BSV (default), IOV/BOV
   ## OMEGA off diag: (handled automatically)
   ## SIGMA: (handled automatically)</p>
<p>trans is used for the following:</p>
<p>- Transformation: Model parameters (say THETA(1)) values and CI
to the scale of the interpretable parameter, (say CL).</p>
<p>- Formatting: For Theta's trans equalling addErr and propErr gives formatting as residual standard
deviations for additive and proportional error terms,
respectively.</p>

<p>### trans column:
   ## THETA: none (default), log/logTrans, logit, addErr/SD, propErr/CV
   ## OMEGA: lognormal (default), normal
   ## OMEGA off diag: (handled automatically)
   ## SIGMA: Not implemented.</p>
<p>##' For THETAs
Inverse of log (inverse is exp) and logit (NMcalc::invlogit) will
be applied to parameter values and confidence intervals. SE and
RSE are calculated before the backtransformation and must be
interpreted on the scale of the estimated THETA, not the scale of
the transformed parameter (e.g. Clerance when CL=EXP(THETA+...).</p>
<p>On OMEGA's, the lognormal distribut is for
CL=EXP(THETA +ETA) , normal is for additive effects:
PAR=EXP(THETA) + ETA.</p>
<p>Formatting of CV for OMEGAs
trans="normal" or "none": CV=se/est
trans="lognormal" : CV=sqrt(exp(OMEGA[i,i])-1)</p>

<p>SIGMA's are sorted and grouped as residual error terms, but
specific formatting of additive, proportional or exponential is
missing. Estimates reported are of the variances and
correlations.</p>

<p><strong>Off-diagonals in OMEGA and SIGMA</strong></p>
<p>These should be fully automated. They are automatically
identified, and labels should be auto-generated based on labels of
the associated diagonal elements. I don't think the labeling is
implemented yet, but it should be relatively simple.</p>
<p>Off-diagonal estimates are shown as correlations. But
SE is standard error of the variances or
cov-variances. For off-diagonal elements, the scale of the
estimate (correlation) and the scale of the associated uncertainty
(covariance) are different.</p>
<p><strong>Columns created by createParameterTable</strong></p>
<p>tab.lab I proposed descriptive label for the parameter. Combines
label, (only for structural thetas) symbol and unit.</p>
<p>panel.label</p>
<p>Latex versions (.ltx columns) are generated using
dplR::latexify. Because dplR is not included in MPN, and we need
just that one function from dplR, the function has been copied
into NMwork instead.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>formatParameterTable</p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

